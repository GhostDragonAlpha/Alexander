{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Compilation Error Collector Output",
  "type": "object",
  "required": ["collector_type", "timestamp", "build_config", "results"],
  "properties": {
    "collector_type": {
      "type": "string",
      "enum": ["compilation_errors"],
      "description": "Type of information collector"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "When the build was executed"
    },
    "build_config": {
      "type": "object",
      "required": ["configuration", "platform", "project_path"],
      "properties": {
        "configuration": {
          "type": "string",
          "enum": ["Debug", "Development", "Shipping"],
          "description": "Build configuration"
        },
        "platform": {
          "type": "string",
          "description": "Target platform"
        },
        "project_path": {
          "type": "string",
          "description": "Path to .uproject file"
        },
        "engine_path": {
          "type": "string",
          "description": "Path to Unreal Engine installation"
        }
      }
    },
    "execution": {
      "type": "object",
      "properties": {
        "start_time": {"type": "string", "format": "date-time"},
        "end_time": {"type": "string", "format": "date-time"},
        "duration_seconds": {"type": "number"},
        "exit_code": {"type": "integer"},
        "command_executed": {"type": "string"}
      }
    },
    "results": {
      "type": "object",
      "required": ["success"],
      "properties": {
        "success": {"type": "boolean"},
        "total_errors": {"type": "integer"},
        "total_warnings": {"type": "integer"},
        "errors": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["file", "line", "message"],
            "properties": {
              "file": {"type": "string"},
              "line": {"type": "integer"},
              "column": {"type": "integer"},
              "error_code": {"type": "string"},
              "message": {"type": "string"},
              "context": {"type": "string"},
              "severity": {"type": "string", "enum": ["error", "fatal"]}
            }
          }
        },
        "warnings": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["file", "line", "message"],
            "properties": {
              "file": {"type": "string"},
              "line": {"type": "integer"},
              "column": {"type": "integer"},
              "warning_code": {"type": "string"},
              "message": {"type": "string"},
              "suggestion": {"type": "string"},
              "severity": {"type": "string", "enum": ["warning", "note"]}
            }
          }
        },
        "modules_built": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "success": {"type": "boolean"},
              "errors": {"type": "integer"},
              "warnings": {"type": "integer"}
            }
          }
        }
      }
    }
  }
}